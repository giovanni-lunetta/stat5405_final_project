<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Untitled</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="DataPreparation_files/libs/clipboard/clipboard.min.js"></script>
<script src="DataPreparation_files/libs/quarto-html/quarto.js"></script>
<script src="DataPreparation_files/libs/quarto-html/popper.min.js"></script>
<script src="DataPreparation_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="DataPreparation_files/libs/quarto-html/anchor.min.js"></script>
<link href="DataPreparation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="DataPreparation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="DataPreparation_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="DataPreparation_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="DataPreparation_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Untitled</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>We will begin by importing the cleaned training dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.3     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lattice

Attaching package: 'caret'

The following object is masked from 'package:purrr':

    lift</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/samlutz10/Desktop/STAT5405/Final Project/cleaned_train_r.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 31007 Columns: 341
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (79): DisplayNameA0, DisplayNameA1, DisplayNameA2, DisplayNameA3, Displ...
dbl (262): PlayId, XA0, XA1, XA2, XA3, XA4, XA5, XA6, XA7, XA8, XA9, XA10, X...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "PlayId"                 "XA0"                    "XA1"                   
  [4] "XA2"                    "XA3"                    "XA4"                   
  [7] "XA5"                    "XA6"                    "XA7"                   
 [10] "XA8"                    "XA9"                    "XA10"                  
 [13] "XB0"                    "XB1"                    "XB2"                   
 [16] "XB3"                    "XB4"                    "XB5"                   
 [19] "XB6"                    "XB7"                    "XB8"                   
 [22] "XB9"                    "XB10"                   "YA0"                   
 [25] "YA1"                    "YA2"                    "YA3"                   
 [28] "YA4"                    "YA5"                    "YA6"                   
 [31] "YA7"                    "YA8"                    "YA9"                   
 [34] "YA10"                   "YB0"                    "YB1"                   
 [37] "YB2"                    "YB3"                    "YB4"                   
 [40] "YB5"                    "YB6"                    "YB7"                   
 [43] "YB8"                    "YB9"                    "YB10"                  
 [46] "SA0"                    "SA1"                    "SA2"                   
 [49] "SA3"                    "SA4"                    "SA5"                   
 [52] "SA6"                    "SA7"                    "SA8"                   
 [55] "SA9"                    "SA10"                   "SB0"                   
 [58] "SB1"                    "SB2"                    "SB3"                   
 [61] "SB4"                    "SB5"                    "SB6"                   
 [64] "SB7"                    "SB8"                    "SB9"                   
 [67] "SB10"                   "AA0"                    "AA1"                   
 [70] "AA2"                    "AA3"                    "AA4"                   
 [73] "AA5"                    "AA6"                    "AA7"                   
 [76] "AA8"                    "AA9"                    "AA10"                  
 [79] "AB0"                    "AB1"                    "AB2"                   
 [82] "AB3"                    "AB4"                    "AB5"                   
 [85] "AB6"                    "AB7"                    "AB8"                   
 [88] "AB9"                    "AB10"                   "DisA0"                 
 [91] "DisA1"                  "DisA2"                  "DisA3"                 
 [94] "DisA4"                  "DisA5"                  "DisA6"                 
 [97] "DisA7"                  "DisA8"                  "DisA9"                 
[100] "DisA10"                 "DisB0"                  "DisB1"                 
[103] "DisB2"                  "DisB3"                  "DisB4"                 
[106] "DisB5"                  "DisB6"                  "DisB7"                 
[109] "DisB8"                  "DisB9"                  "DisB10"                
[112] "OrientationA0"          "OrientationA1"          "OrientationA2"         
[115] "OrientationA3"          "OrientationA4"          "OrientationA5"         
[118] "OrientationA6"          "OrientationA7"          "OrientationA8"         
[121] "OrientationA9"          "OrientationA10"         "OrientationB0"         
[124] "OrientationB1"          "OrientationB2"          "OrientationB3"         
[127] "OrientationB4"          "OrientationB5"          "OrientationB6"         
[130] "OrientationB7"          "OrientationB8"          "OrientationB9"         
[133] "OrientationB10"         "DirA0"                  "DirA1"                 
[136] "DirA2"                  "DirA3"                  "DirA4"                 
[139] "DirA5"                  "DirA6"                  "DirA7"                 
[142] "DirA8"                  "DirA9"                  "DirA10"                
[145] "DirB0"                  "DirB1"                  "DirB2"                 
[148] "DirB3"                  "DirB4"                  "DirB5"                 
[151] "DirB6"                  "DirB7"                  "DirB8"                 
[154] "DirB9"                  "DirB10"                 "DisplayNameA0"         
[157] "DisplayNameA1"          "DisplayNameA2"          "DisplayNameA3"         
[160] "DisplayNameA4"          "DisplayNameA5"          "DisplayNameA6"         
[163] "DisplayNameA7"          "DisplayNameA8"          "DisplayNameA9"         
[166] "DisplayNameA10"         "DisplayNameB0"          "DisplayNameB1"         
[169] "DisplayNameB2"          "DisplayNameB3"          "DisplayNameB4"         
[172] "DisplayNameB5"          "DisplayNameB6"          "DisplayNameB7"         
[175] "DisplayNameB8"          "DisplayNameB9"          "DisplayNameB10"        
[178] "JerseyNumberA0"         "JerseyNumberA1"         "JerseyNumberA2"        
[181] "JerseyNumberA3"         "JerseyNumberA4"         "JerseyNumberA5"        
[184] "JerseyNumberA6"         "JerseyNumberA7"         "JerseyNumberA8"        
[187] "JerseyNumberA9"         "JerseyNumberA10"        "JerseyNumberB0"        
[190] "JerseyNumberB1"         "JerseyNumberB2"         "JerseyNumberB3"        
[193] "JerseyNumberB4"         "JerseyNumberB5"         "JerseyNumberB6"        
[196] "JerseyNumberB7"         "JerseyNumberB8"         "JerseyNumberB9"        
[199] "JerseyNumberB10"        "PlayerHeightA0"         "PlayerHeightA1"        
[202] "PlayerHeightA2"         "PlayerHeightA3"         "PlayerHeightA4"        
[205] "PlayerHeightA5"         "PlayerHeightA6"         "PlayerHeightA7"        
[208] "PlayerHeightA8"         "PlayerHeightA9"         "PlayerHeightA10"       
[211] "PlayerHeightB0"         "PlayerHeightB1"         "PlayerHeightB2"        
[214] "PlayerHeightB3"         "PlayerHeightB4"         "PlayerHeightB5"        
[217] "PlayerHeightB6"         "PlayerHeightB7"         "PlayerHeightB8"        
[220] "PlayerHeightB9"         "PlayerHeightB10"        "PlayerWeightA0"        
[223] "PlayerWeightA1"         "PlayerWeightA2"         "PlayerWeightA3"        
[226] "PlayerWeightA4"         "PlayerWeightA5"         "PlayerWeightA6"        
[229] "PlayerWeightA7"         "PlayerWeightA8"         "PlayerWeightA9"        
[232] "PlayerWeightA10"        "PlayerWeightB0"         "PlayerWeightB1"        
[235] "PlayerWeightB2"         "PlayerWeightB3"         "PlayerWeightB4"        
[238] "PlayerWeightB5"         "PlayerWeightB6"         "PlayerWeightB7"        
[241] "PlayerWeightB8"         "PlayerWeightB9"         "PlayerWeightB10"       
[244] "PlayerCollegeNameA0"    "PlayerCollegeNameA1"    "PlayerCollegeNameA2"   
[247] "PlayerCollegeNameA3"    "PlayerCollegeNameA4"    "PlayerCollegeNameA5"   
[250] "PlayerCollegeNameA6"    "PlayerCollegeNameA7"    "PlayerCollegeNameA8"   
[253] "PlayerCollegeNameA9"    "PlayerCollegeNameA10"   "PlayerCollegeNameB0"   
[256] "PlayerCollegeNameB1"    "PlayerCollegeNameB2"    "PlayerCollegeNameB3"   
[259] "PlayerCollegeNameB4"    "PlayerCollegeNameB5"    "PlayerCollegeNameB6"   
[262] "PlayerCollegeNameB7"    "PlayerCollegeNameB8"    "PlayerCollegeNameB9"   
[265] "PlayerCollegeNameB10"   "PositionA0"             "PositionA1"            
[268] "PositionA2"             "PositionA3"             "PositionA4"            
[271] "PositionA5"             "PositionA6"             "PositionA7"            
[274] "PositionA8"             "PositionA9"             "PositionA10"           
[277] "PositionB0"             "PositionB1"             "PositionB2"            
[280] "PositionB3"             "PositionB4"             "PositionB5"            
[283] "PositionB6"             "PositionB7"             "PositionB8"            
[286] "PositionB9"             "PositionB10"            "BirthYearA0"           
[289] "BirthYearA1"            "BirthYearA2"            "BirthYearA3"           
[292] "BirthYearA4"            "BirthYearA5"            "BirthYearA6"           
[295] "BirthYearA7"            "BirthYearA8"            "BirthYearA9"           
[298] "BirthYearA10"           "BirthYearB0"            "BirthYearB1"           
[301] "BirthYearB2"            "BirthYearB3"            "BirthYearB4"           
[304] "BirthYearB5"            "BirthYearB6"            "BirthYearB7"           
[307] "BirthYearB8"            "BirthYearB9"            "BirthYearB10"          
[310] "Season"                 "YardLine"               "Quarter"               
[313] "PossessionTeam"         "Down"                   "Distance"              
[316] "FieldPosition"          "HomeScoreBeforePlay"    "VisitorScoreBeforePlay"
[319] "OffenseFormation"       "OffensePersonnel"       "DefendersInTheBox"     
[322] "PlayDirection"          "Yards"                  "HomeTeamAbbr"          
[325] "VisitorTeamAbbr"        "Week"                   "Stadium"               
[328] "Location"               "StadiumType"            "Turf"                  
[331] "GameWeather"            "Temperature"            "Humidity"              
[334] "WindSpeed"              "WindDirection"          "TimeDelta"             
[337] "GameHour"               "DL"                     "LB"                    
[340] "BL"                     "OL"                    </code></pre>
</div>
</div>
<p>Lets start by reducing the dimensionality of this dataset. We will remove varibales that are not observable prior to the snap of the ball. These variables include the speed of each player (SA0 to SB10), the acceleration of each player (AA0-AB10), the direction the player is running in (DirA0-DirB10), the jersey number of each player (JerseyNumberA0-JerseyNumberB10), and the time between snap and the handoff (TimeDelta). Then lets obtain the entire structure of the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>ScoreDelta <span class="ot">&lt;-</span> train<span class="sc">$</span>HomeScoreBeforePlay <span class="sc">-</span> train<span class="sc">$</span>VisitorScoreBeforePlay</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"SA"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"SB"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"AA"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"AB"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"DirA"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"DirB"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"DisA"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"DisB"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"JerseyNumber"</span>), <span class="sc">-</span>TimeDelta, <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"HomeScoreBeforePlay"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"VisitorScoreBeforePlay"</span>), <span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">"TeamAbbr"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"PlayerCollege"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Position"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Birth"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Location"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"PlayID"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Season"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Display"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Stadium"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Possession"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"FieldPosition"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Turf"</span>))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">OffenseFormation =</span> <span class="fu">as.factor</span>(OffenseFormation),  <span class="at">PlayDirection =</span> <span class="fu">as.factor</span>(PlayDirection), <span class="at">GameWeather =</span> <span class="fu">as.factor</span>(GameWeather), <span class="at">WindDirection =</span> <span class="fu">as.factor</span>(WindDirection), <span class="at">Down =</span> <span class="fu">as.factor</span>(Down), <span class="at">Quarter =</span> <span class="fu">as.factor</span>(Quarter), <span class="at">Distance =</span> <span class="fu">as.factor</span>(Distance), <span class="at">Week =</span> <span class="fu">as.factor</span>(Week), <span class="at">DL =</span> <span class="fu">as.factor</span>(DL), <span class="at">LB =</span> <span class="fu">as.factor</span>(LB), <span class="at">BL =</span> <span class="fu">as.factor</span>(BL), <span class="at">GameHour =</span> <span class="fu">as.factor</span>(GameHour))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>OffensePersonnel <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"OL"</span>, train<span class="sc">$</span>OffensePersonnel), train<span class="sc">$</span>OffensePersonnel, <span class="fu">paste0</span>(<span class="st">"0 OL, "</span>, train<span class="sc">$</span>OffensePersonnel))</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">separate</span>(OffensePersonnel, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"OL"</span>, <span class="st">"RB"</span>, <span class="st">"TE"</span>, <span class="st">"WR"</span>), <span class="at">sep =</span> <span class="st">",</span><span class="sc">\\</span><span class="st">s*"</span>, <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 4 pieces. Additional pieces discarded in 448 rows [140, 159, 167, 170,
171, 178, 181, 188, 189, 194, 195, 246, 766, 767, 768, 1391, 1394, 1487, 1499,
1500, ...].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>OL <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>RB <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"[^0-9.]"</span>, <span class="st">""</span>, train<span class="sc">$</span>RB))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>TE <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"[^0-9.]"</span>, <span class="st">""</span>, train<span class="sc">$</span>TE))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>WR <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"[^0-9.]"</span>, <span class="st">""</span>, train<span class="sc">$</span>WR))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "XA0"               "XA1"               "XA2"              
  [4] "XA3"               "XA4"               "XA5"              
  [7] "XA6"               "XA7"               "XA8"              
 [10] "XA9"               "XA10"              "XB0"              
 [13] "XB1"               "XB2"               "XB3"              
 [16] "XB4"               "XB5"               "XB6"              
 [19] "XB7"               "XB8"               "XB9"              
 [22] "XB10"              "YA0"               "YA1"              
 [25] "YA2"               "YA3"               "YA4"              
 [28] "YA5"               "YA6"               "YA7"              
 [31] "YA8"               "YA9"               "YA10"             
 [34] "YB0"               "YB1"               "YB2"              
 [37] "YB3"               "YB4"               "YB5"              
 [40] "YB6"               "YB7"               "YB8"              
 [43] "YB9"               "YB10"              "OrientationA0"    
 [46] "OrientationA1"     "OrientationA2"     "OrientationA3"    
 [49] "OrientationA4"     "OrientationA5"     "OrientationA6"    
 [52] "OrientationA7"     "OrientationA8"     "OrientationA9"    
 [55] "OrientationA10"    "OrientationB0"     "OrientationB1"    
 [58] "OrientationB2"     "OrientationB3"     "OrientationB4"    
 [61] "OrientationB5"     "OrientationB6"     "OrientationB7"    
 [64] "OrientationB8"     "OrientationB9"     "OrientationB10"   
 [67] "PlayerHeightA0"    "PlayerHeightA1"    "PlayerHeightA2"   
 [70] "PlayerHeightA3"    "PlayerHeightA4"    "PlayerHeightA5"   
 [73] "PlayerHeightA6"    "PlayerHeightA7"    "PlayerHeightA8"   
 [76] "PlayerHeightA9"    "PlayerHeightA10"   "PlayerHeightB0"   
 [79] "PlayerHeightB1"    "PlayerHeightB2"    "PlayerHeightB3"   
 [82] "PlayerHeightB4"    "PlayerHeightB5"    "PlayerHeightB6"   
 [85] "PlayerHeightB7"    "PlayerHeightB8"    "PlayerHeightB9"   
 [88] "PlayerHeightB10"   "PlayerWeightA0"    "PlayerWeightA1"   
 [91] "PlayerWeightA2"    "PlayerWeightA3"    "PlayerWeightA4"   
 [94] "PlayerWeightA5"    "PlayerWeightA6"    "PlayerWeightA7"   
 [97] "PlayerWeightA8"    "PlayerWeightA9"    "PlayerWeightA10"  
[100] "PlayerWeightB0"    "PlayerWeightB1"    "PlayerWeightB2"   
[103] "PlayerWeightB3"    "PlayerWeightB4"    "PlayerWeightB5"   
[106] "PlayerWeightB6"    "PlayerWeightB7"    "PlayerWeightB8"   
[109] "PlayerWeightB9"    "PlayerWeightB10"   "YardLine"         
[112] "Quarter"           "Down"              "Distance"         
[115] "OffenseFormation"  "RB"                "TE"               
[118] "WR"                "DefendersInTheBox" "PlayDirection"    
[121] "Yards"             "Week"              "GameWeather"      
[124] "Temperature"       "Humidity"          "WindSpeed"        
[127] "WindDirection"     "GameHour"          "DL"               
[130] "LB"                "BL"                "ScoreDelta"       </code></pre>
</div>
</div>
<p>Lets randomize all rows in the train datset to ensure independence.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">69</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> train[<span class="fu">sample</span>(<span class="fu">nrow</span>(train)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#print the first 5 rows of the dataset and show all 227 columns</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(train, <span class="at">list.len=</span><span class="fu">ncol</span>(train))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [31,007 × 132] (S3: tbl_df/tbl/data.frame)
 $ XA0              : num [1:31007] 56.5 94.9 89.3 90.7 12.6 ...
 $ XA1              : num [1:31007] 53.9 88.5 91 93.5 16.4 ...
 $ XA2              : num [1:31007] 50.1 90 86.7 89.5 21.4 ...
 $ XA3              : num [1:31007] 50.5 94.4 90.1 89.9 25.9 ...
 $ XA4              : num [1:31007] 67.8 91.1 91.3 90.2 21.1 ...
 $ XA5              : num [1:31007] 50.9 92.4 93.8 88.2 20.3 ...
 $ XA6              : num [1:31007] 50.5 92.9 87.9 93 24.9 ...
 $ XA7              : num [1:31007] 50 93.2 102.5 87.9 19.2 ...
 $ XA8              : num [1:31007] 49.6 93.4 89.8 94.5 24.5 ...
 $ XA9              : num [1:31007] 53.1 94 88.8 89.5 23.7 ...
 $ XA10             : num [1:31007] 53 94 91.7 87.7 21.4 ...
 $ XB0              : num [1:31007] 45.1 106 90.7 70.1 47.4 ...
 $ XB1              : num [1:31007] 45.1 100.3 94.7 69.4 44.6 ...
 $ XB2              : num [1:31007] 41.5 102.6 90.2 77.7 47.7 ...
 $ XB3              : num [1:31007] 50.3 105.2 92.8 82.3 49.1 ...
 $ XB4              : num [1:31007] 57.6 104.2 95.1 72.7 48.4 ...
 $ XB5              : num [1:31007] 40.8 105.4 91.8 73.8 51 ...
 $ XB6              : num [1:31007] 39.5 104.6 93.2 70.7 48.4 ...
 $ XB7              : num [1:31007] 39.1 106.6 97.8 72.7 48.9 ...
 $ XB8              : num [1:31007] 46 105.3 94 69.7 48.7 ...
 $ XB9              : num [1:31007] 44.8 106.3 91.6 71.3 48 ...
 $ XB10             : num [1:31007] 43.4 104.7 91.6 83 43.3 ...
 $ YA0              : num [1:31007] 16.9 24.4 24.6 24.6 27.5 ...
 $ YA1              : num [1:31007] 25.8 22.8 24.7 28 35.9 ...
 $ YA2              : num [1:31007] 26 23.4 33.9 26.6 30.9 ...
 $ YA3              : num [1:31007] 19.6 21.5 27.4 29.3 23.7 ...
 $ YA4              : num [1:31007] 28.3 22.8 23.1 31.9 16.9 ...
 $ YA5              : num [1:31007] 28.73 28.44 8.32 28.63 34.75 ...
 $ YA6              : num [1:31007] 22.6 17.9 21.4 35.2 26.9 ...
 $ YA7              : num [1:31007] 31.4 26.6 24.4 37.2 15.6 ...
 $ YA8              : num [1:31007] 24.3 41.3 30.6 27.1 21.7 ...
 $ YA9              : num [1:31007] 23.3 20.2 28.7 25.8 19.9 ...
 $ YA10             : num [1:31007] 40.6 14.3 26.9 19.3 23.6 ...
 $ YB0              : num [1:31007] 7.43 26.47 18.08 29.71 30.71 ...
 $ YB1              : num [1:31007] 18.3 27.2 21.2 26.9 27 ...
 $ YB2              : num [1:31007] 23.8 26.7 24.9 18.9 24.9 ...
 $ YB3              : num [1:31007] 27.3 23.3 22.9 34.6 26.7 ...
 $ YB4              : num [1:31007] 18.5 26.6 44 24.9 25.6 ...
 $ YB5              : num [1:31007] 27.7 29.4 30.1 30.9 41.6 ...
 $ YB6              : num [1:31007] 19.4 21.8 21.2 37.9 28.2 ...
 $ YB7              : num [1:31007] 26.8 28.7 26.6 38.7 33.8 ...
 $ YB8              : num [1:31007] 23.9 43.9 17.8 32.5 23.3 ...
 $ YB9              : num [1:31007] 31.4 24.6 19.9 31.1 29.2 ...
 $ YB10             : num [1:31007] 13 20.7 27.1 26.1 27.4 ...
 $ OrientationA0    : num [1:31007] 237.3 59.4 180.6 216.4 102.5 ...
 $ OrientationA1    : num [1:31007] 163.2 79.2 153.5 106.1 82.9 ...
 $ OrientationA2    : num [1:31007] 115 233 111 202 102 ...
 $ OrientationA3    : num [1:31007] 174 92.5 204.1 224.7 149.8 ...
 $ OrientationA4    : num [1:31007] 170.3 20.9 182.8 257.8 105.5 ...
 $ OrientationA5    : num [1:31007] 131.8 46.8 164.6 259 72.9 ...
 $ OrientationA6    : num [1:31007] 183 153 221 344 146 ...
 $ OrientationA7    : num [1:31007] 136.1 46 197.4 225.6 76.6 ...
 $ OrientationA8    : num [1:31007] 211.1 103.7 168.3 221.4 67.1 ...
 $ OrientationA9    : num [1:31007] 185.6 101 141.6 201.2 82.8 ...
 $ OrientationA10   : num [1:31007] 234.2 60.2 145.5 247.6 115.1 ...
 $ OrientationB0    : num [1:31007] 269 87.7 201.4 293.7 13 ...
 $ OrientationB1    : num [1:31007] 186.3 56.3 145 322.8 250 ...
 $ OrientationB2    : num [1:31007] 149.9 330.3 112 289.2 98.7 ...
 $ OrientationB3    : num [1:31007] 127.9 79.8 155 252.3 14.3 ...
 $ OrientationB4    : num [1:31007] 178.2 18.9 147.9 255.5 86.4 ...
 $ OrientationB5    : num [1:31007] 124.8 105.2 131.4 289.4 89.8 ...
 $ OrientationB6    : num [1:31007] 254.5 72.4 173.4 279.7 75.6 ...
 $ OrientationB7    : num [1:31007] 188.2 40.7 150.8 272.6 86.2 ...
 $ OrientationB8    : num [1:31007] 145 112 178 184 58 ...
 $ OrientationB9    : num [1:31007] 129.7 75.7 183.2 246.8 60.7 ...
 $ OrientationB10   : num [1:31007] 212.8 325.8 142.9 275.4 76.2 ...
 $ PlayerHeightA0   : num [1:31007] 8 5.5 5.5 5.5 8 8 3 8 3.5 4.5 ...
 $ PlayerHeightA1   : num [1:31007] 4 7 4 4 7.5 7.5 8 3.5 5.5 3 ...
 $ PlayerHeightA2   : num [1:31007] 4 3 4 4.5 4.5 4.5 4.5 7.5 4 5 ...
 $ PlayerHeightA3   : num [1:31007] 7.5 4.5 4.5 5.5 4.5 4.5 8 5 4.5 4.5 ...
 $ PlayerHeightA4   : num [1:31007] 3.5 3.5 8 6 8 4.5 3.5 3.5 3 4 ...
 $ PlayerHeightA5   : num [1:31007] 3.5 5.5 3 4.5 7 8 4 7.5 4.5 8 ...
 $ PlayerHeightA6   : num [1:31007] 5.5 5.5 4.5 4 5.5 4.5 3.5 5 6 7 ...
 $ PlayerHeightA7   : num [1:31007] 4.5 6.5 4 3 8 5.5 4.5 3.5 3.5 4 ...
 $ PlayerHeightA8   : num [1:31007] 3.5 4.5 8 3.5 5 8 3 5 3.5 4.5 ...
 $ PlayerHeightA9   : num [1:31007] 8 6 4.5 6 5 5 3 3.5 4.5 3 ...
 $ PlayerHeightA10  : num [1:31007] 8 4 3 4.5 4 4 3 4 5.5 7.5 ...
 $ PlayerHeightB0   : num [1:31007] 8 5.5 5.5 3.5 7.5 7.5 6 5.5 3.5 4.5 ...
 $ PlayerHeightB1   : num [1:31007] 4 7 4 6 5.5 5.5 6.5 5.5 5.5 3 ...
 $ PlayerHeightB2   : num [1:31007] 4 3 4 4 5.5 5.5 5 3.5 4 5 ...
 $ PlayerHeightB3   : num [1:31007] 7.5 5.5 4.5 3 5 5 7 4 4.5 4.5 ...
 $ PlayerHeightB4   : num [1:31007] 3.5 4.5 8 8 5.5 5.5 5.5 5.5 3 4 ...
 $ PlayerHeightB5   : num [1:31007] 3.5 5.5 3 3.5 4.5 4.5 5 3.5 4.5 8 ...
 $ PlayerHeightB6   : num [1:31007] 5.5 5.5 4.5 4 5 5 5 6 6 7 ...
 $ PlayerHeightB7   : num [1:31007] 3.5 6.5 4 3 3.5 3 6 5 3.5 6.5 ...
 $ PlayerHeightB8   : num [1:31007] 8 4.5 8 4 4.5 3.5 7.5 6 3.5 4 ...
 $ PlayerHeightB9   : num [1:31007] 8 6 4.5 5.5 4.5 4.5 4.5 4 4.5 4.5 ...
 $ PlayerHeightB10  : num [1:31007] 7.5 6 3 3.5 3 3 4.5 4.5 5.5 7.5 ...
 $ PlayerWeightA0   : num [1:31007] 192 305 275 340 206 206 210 208 215 310 ...
 $ PlayerWeightA1   : num [1:31007] 235 215 249 220 190 190 195 234 263 242 ...
 $ PlayerWeightA2   : num [1:31007] 293 209 262 316 235 235 265 200 215 270 ...
 $ PlayerWeightA3   : num [1:31007] 195 317 350 310 318 260 211 261 295 220 ...
 $ PlayerWeightA4   : num [1:31007] 205 233 203 260 215 318 336 240 232 200 ...
 $ PlayerWeightA5   : num [1:31007] 298 304 191 315 190 215 250 207 245 193 ...
 $ PlayerWeightA6   : num [1:31007] 236 250 256 203 250 311 193 300 341 183 ...
 $ PlayerWeightA7   : num [1:31007] 250 316 213 195 180 250 261 180 198 177 ...
 $ PlayerWeightA8   : num [1:31007] 286 212 202 220 342 180 227 270 200 280 ...
 $ PlayerWeightA9   : num [1:31007] 221 314 318 315 250 342 340 200 246 305 ...
 $ PlayerWeightA10  : num [1:31007] 191 210 245 204 236 236 197 305 265 204 ...
 $ PlayerWeightB0   : num [1:31007] 192 305 275 300 325 325 245 305 215 310 ...
 $ PlayerWeightB1   : num [1:31007] 235 215 249 285 218 218 330 318 263 242 ...
 $ PlayerWeightB2   : num [1:31007] 293 209 262 190 255 255 319 233 215 270 ...
 $ PlayerWeightB3   : num [1:31007] 195 318 350 210 315 315 191 215 295 220 ...
 $ PlayerWeightB4   : num [1:31007] 205 317 203 190 310 310 310 312 232 200 ...
 $ PlayerWeightB5   : num [1:31007] 298 304 191 251 215 215 270 223 245 193 ...
 $ PlayerWeightB6   : num [1:31007] 236 250 256 235 315 315 252 314 341 183 ...
 $ PlayerWeightB7   : num [1:31007] 286 316 213 196 218 190 315 300 198 300 ...
 $ PlayerWeightB8   : num [1:31007] 221 212 202 265 240 218 208 220 200 177 ...
 $ PlayerWeightB9   : num [1:31007] 191 314 318 265 327 327 313 210 246 280 ...
 $ PlayerWeightB10  : num [1:31007] 201 220 245 200 233 233 311 210 265 204 ...
 $ YardLine         : num [1:31007] 40 16 21 21 14 25 49 25 35 46 ...
 $ Quarter          : Factor w/ 5 levels "1","2","3","4",..: 2 2 4 2 2 1 2 4 4 4 ...
 $ Down             : Factor w/ 4 levels "1","2","3","4": 1 1 1 2 1 1 1 1 1 1 ...
 $ Distance         : Factor w/ 35 levels "1","2","3","4",..: 10 10 10 10 10 10 10 10 10 10 ...
 $ OffenseFormation : Factor w/ 9 levels "ACE","EMPTY",..: 7 3 3 7 7 7 6 6 3 7 ...
 $ RB               : num [1:31007] 2 2 2 1 1 1 1 1 2 1 ...
 $ TE               : num [1:31007] 1 1 2 1 1 2 1 1 1 1 ...
 $ WR               : num [1:31007] 2 2 1 3 3 2 3 3 1 3 ...
 $ DefendersInTheBox: num [1:31007] 8 7 8 6 7 8 6 7 7 7 ...
 $ PlayDirection    : Factor w/ 2 levels "left","right": 2 2 2 1 1 2 1 1 2 1 ...
 $ Yards            : num [1:31007] 1 12 3 -2 14 4 3 7 7 3 ...
 $ Week             : Factor w/ 17 levels "1","2","3","4",..: 3 9 14 2 2 2 17 11 17 3 ...
 $ GameWeather      : Factor w/ 5 levels "clear","none",..: 1 3 1 1 1 1 3 2 1 1 ...
 $ Temperature      : num [1:31007] 84 77 39 81 79 79 19 68 71 68 ...
 $ Humidity         : num [1:31007] 25 62 55 45 48 48 36 54 66 42 ...
 $ WindSpeed        : num [1:31007] 5 16 11 5 5 5 12 4 9 13 ...
 $ WindDirection    : Factor w/ 9 levels "east","none",..: 9 7 2 1 5 5 5 1 4 8 ...
 $ GameHour         : Factor w/ 16 levels "0","1","2","3",..: 16 10 4 4 14 13 3 7 16 13 ...
 $ DL               : Factor w/ 8 levels "0","1","2","3",..: 5 4 5 5 3 5 3 5 5 5 ...
 $ LB               : Factor w/ 7 levels "0","1","2","3",..: 4 5 4 3 5 4 5 3 4 3 ...
 $ BL               : Factor w/ 8 levels "1","2","3","4",..: 4 4 4 5 5 4 5 5 4 5 ...
 $ ScoreDelta       : num [1:31007] -7 0 -13 -11 0 7 -11 41 -16 -8 ...</code></pre>
</div>
</div>
<p>Now lets save this new fully cleaned and ready to use dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(train, <span class="st">"/Users/samlutz10/Desktop/STAT5405/Final Project/train_ready.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>